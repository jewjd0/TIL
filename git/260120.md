# Git Branch
  - 나뭇가지처럼 여러 갈래로 작업 공간 분리, 독립적으로 작업할 수 있도록 도와주는 Git의 도구
  - 장점
    - 독립적인 작업 공간 형성 -> 원본에 대해 안전
    - 하나의 작업은 하나의 브랜치 -> 체계적 협업, 개발 가능
    - 손쉽게 브랜치 생성, 브랜치 사이 이동 가능
## Branch
  - Branch를 꼭 사용해야 하는가?
    - 상용 서비스에 발생한 에러 해결을 위해 필요
      - 브랜치로 별도의 작업 공간 생성
      - 에러 버전 이전 버전으로 돌리거나 삭제
      - 작업 내용이 master에 영향 X
      - 에러 수정 후 master에 병합
    - 새로운 기능 개발 시 필요
      - 새로운 기능 개발을 위한 별도의 작업 공간 생성
      - 기존 기능에 영향 X
      - 개발 완료 후 master에 병합
    - 작업자가 여럿일 때 필요
      - 각 작업자별로 브랜치 생성
      - 독립적인 작업 공간 제공
      - 작업 완료 후 master에 병합
  - Master(Main) 브랜치
    - 기본(Default) 브랜치
    - 기준점으로 사용
    - 다른 브랜치에서 작업 완료 후 병합 대상
    - 이름 수정 x
### Branch Command
  - git branch : 브랜치 조회, 생성, 삭제 등 브랜치 관련
    - 브랜치 생성
      - git branch 브랜치이름
    - 브랜치 조회
      - git branch
      - git branch -r : 원격 브랜치 조회
    - 브랜치 이동
      - git checkout 브랜치이름
    - 브랜치 생성 및 이동
      - git checkout -b 브랜치이름
    - 브랜치 삭제
      - **브랜치 삭제해도 커밋 기록은 남아있음. <br>
      기능 다 만들면 브랜치 삭제해주기!**
      - git branch -d 브랜치이름 (병합된 브랜치만 삭제 가능)
      - git branch -D 브랜치이름 : 강제 삭제 <br>**쓰지마. 모든 문제는 강제에서 일어난다**
  - git switch : 현재 브랜치에서 다른 브랜치로 HEAD 이동
    - 브랜치 이동
      - git switch 브랜치이름
    - 브랜치 생성 및 이동 (웬만하면 쓰지말고 이동만 하기)
      - git switch -c 브랜치이름
      - git switch -c 브랜치이름 commitID : 특정 커밋에서 브랜치 생성 및 이동, 특수 상황에서 사용
  - HEAD
    - 현재 작업 중인 브랜치를 가리키는 포인터
  - checkout
    - branch + switch 기능 합친 명령어
    - 옛날 방식. 지금은 switch 쓰는게 좋음
    - 생성은 생성대로, 이동은 이동대로 명령어 분리하는게 헷갈리지 않음
  - 주의사항
    - switch 하기 전에 작업 중인 파일이 모두 버전 관리가 되고 있는지 확인해야만 한다!
    - git add하지 않고 브랜치를 그냥 master로 이동하면 버전 관리에 들어가지 않았기 때문에 내용이 그대로 유지된 채로 master에 병합되어버릴 수 있다.
## Branch Scenario
### Branch 생성 및 조회
### Branch 이동
### Branch 에서 commit 생성

## Git merge
- 두 브랜치를 하나로 병합
- 병합 전에 확인할 것
  - 수신 브랜치 확인
  - 병합 진행은 수신 브랜치에서 진행되어야 한다
  - 최신 커밋 상태 확인
  - 수신 브랜치, 병합 브랜치 모두 최신 커밋 상태인지 확인
### Fast-Forward Merge
- 웬만하면 혼자일땐 이거씀
- 실제로 병합하는 대신 현재 브랜치 상태를 대상 브랜치 상태로 이동(빨리감기)
- merge 과정 x 단순히 브랜치 포인터 이동
- head가 master, 브랜치 둘 다 가리킴
- 병합 후 브랜치 삭제
### 3-Way Merge
- 병합하는 각 브랜치의 commit 2개와 공통 조상 commit 1개를 사용하여 병합
- 공통 조상에서 차이가 생긴 부분을 병합 시도
- git bash에서 merge 하면 vim 메모장 실행 
  - 두 커밋이 모두 동시에 존재할 수 있는 새 커밋 작성 필요
  - new 커밋 메시지 작성해달라는뜻
  - 수정하고싶으면 i/insert 눌러서 수정
  - esc 눌러서 입력 모드 탈출
  - :wq 입력 후 엔터 -> 저장 후 종료
- git log --oneline --graph --all : 커밋 그래프 확인
- 브랜치 삭제 후 로그 확인하면 브랜치 사라진 것처럼 보이지만 커밋 기록은 남아있음
### Merge Conflict
- 두 브랜치에서 동일한 파일의 동일한 부분이 수정된 후 병합 시 충돌 발생
- 당연하게도 자주 난다
- 명령어 치고 나서 뭔말하는지 읽으세요
  - conflict났다고 표시해줌
  - vscode에서 gui로 뭐 해보고 ctrl + z로 돌려도 됨
  - vscode에서 충돌난 파일 열면 <<<<<<<: HEAD 이런식으로 표시됨
    - `HEAD`: 현재 브랜치 내용
    - `=======`: 구분선
    - `>>>>>>>` 브랜치이름: 병합하려는 브랜치 내용
- add하고 커밋할때까지 MERGING 상태로 남아있음
- 병합 전에 pull 해서 최신 커밋 상태로 만든 후 병합 시도

- **깃헙, 깃랩에서 병합할 때 주의할 것**
  - 변경 내용물 내 로컬 마스터는 건드리지 말것
  - 변경 내용물 새로운 브랜치명으로 push
  - 페이지에서 브랜치 변경하면 그대로 보임
  - new merge request 하면 승인하는사람, 리뷰하는사람 다 정할 수 있음
  - 기본옵션 머지 후 브랜치 삭제 체크되어있음
  - 스쿼시: 자잘한 커밋들 하나로 합쳐서 머지 (압축)
  - 팀원마다 머지 권한, 범위 다르게 하기
  - 깃랩에서 머지하다 충돌나면 로컬에서 해결 후 푸시해야함
    - 마스터에서 pull 받고
    - 충돌난 브랜치로 이동 후 수정
    - 수정 후 다시 merge request
- 깃헙, 깃랩에서 머지 후 해야할 것
  - 로컬 마스터 브랜치로 이동
  - git pull origin master (원격 저장소 최신 커밋 가져오기)

### rebase/squash and merge
- rebase: 브랜치의 커밋들을 다른 브랜치의 최신 커밋 위로 재배치
  - 브랜치 히스토리 깔끔하게 유지
  - 커밋이 넘 길어져서 가독성 별로 (권장 x)
- squash and merge: 여러 커밋을 하나로 합쳐서 병합
  - 장점:기록을 없앰 (오타수정 커밋메시지 등)
  - 단점:기록을 없앰 

### 터질거면 지금 터져보고 시도해볼 거 다 시도해라