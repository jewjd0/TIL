# 힙과 백트래킹
## 힙
### 개요
- **완전 이진 트리**에 있는 노드 중에서 키 값이 가장 큰 노드나 키 값이 가장 작은 노드를 찾아내기 위한 자료구조
- 최대 힙(Max Heap)
  - 키 값이 가장 큰 노드를 찾기 위한 이진 트리
  - 부모 노드 키 값 > 자식 노드 키 값
  - 형제 노드끼리의 키 값에 대한 대소는 보장하지 않음
  - 루트 노드: 키 값이 가장 큰 노드
- 최소 힙(Min Heap)
  - 키 값이 가장 작은 노드를 찾기 위한 이진 트리
  - 부모 노드 키 값 < 자식 노드 키 값
  - 루트 노드: 키 값이 가장 작은 노드
### 연산
- 삽입: O(log n)
  - 자리를 찾아서 넣으면 리스트 쓰지 뭐하러 힙을써. 자료구조 사용하는 이유는 언제나 연산을 줄이기 위해.
  - 삽입먼저, 힙의 가장 마지막 노드에 새 노드를 추가
  - 새 노드 키값이 부모 노드의 키값보다 크면, 부모 노드와 새 노드를 교환
  - 새 노드가 루트 노드가 될 때까지 반복
- 삭제: O(log n)
  - 힙에서는 루트 노드 원소만 삭제 가능
  - 루트 노드 원소 삭제 후 반환
  - 힙 종류에 따라 최대값, 최소값 반환
  - 순서: 루트 노드 삭제 -> 힙 마지막 노드 삭제 후 루트 노드로 이동 -> 힙 속성 유지 위해 재정렬
## 우선순위 큐
- 우선순위를 가진 항목들 저장 큐
- FIFO순이 아니라 우선순위 높은 순서대로 나감
- 힙으로 구현
- 삽입, 삭제: O(log n)
### heapq 모듈
- 최소 힙 구현 라이브러리
## 추가
- 파이썬에서 _하나로 시작하는 함수 이름은 내부적으로 사용할 함수라는 뜻. 외부에서 호출하지 말라는 의미. 힙 클래스 실습파일 -> _siftup, _siftdown 확인할 것
- heapify를 할 때 shiftup, siftdown을 적절히 사용해서 힙 속성을 유지. 뭐가 더 효율적인지는 상황에 따라 다름. 이번 최소 힙 실습은 siftdown 사용


## 백트래킹
### 개요
- N-Queens문제
- 여러 가지 선택지들이 존재하는 상황에서 한 가지 선택
- 선택 이루어지면 새 선택지의 집합 생성
- 선택 계속하면 목표 상태 도달
- 8-Queens 문제: 8x8 체스판에 8개의 퀸을 서로 공격하지 못하도록 배치하는 문제
  - 후보 해의 수: 64C8 = 64! / 8!(64-8)! = 4,426,165,368
  - 실제 해의 수: 92
  - 44억개가 넘는 후보 수 중에 92개를 최대한 효율적으로 찾아내기
### 백트래킹
  - 해를 찾기 위한 탐색 과정에서 해가 될 수 없다고 판단되는 후보 해를 미리 배제하여 탐색 범위를 줄이는 기법
  - 유망성 점검, 유망하지 않으면 그 노드의 부모로 되돌아가 다음 자식 노드 탐색
- 유망하다 : 어떤 노드 방문 시 그 노드를 포함한 경로가 해답이 될 가능성이 있다
- 가지치기 : 유망하지 않은 노드가 포함되면 더 이상 고려하지 않는다
  - visited 사용했던 것의 연장선
### 절차
- 상태 공간 트리 깊이 우선 탐색 실시
- 각 노드 방문 시 유망성 점검
- 유망하지 않으면 부모 노드로 되돌아가 다음 자식 노드 탐색
### DFS와의 차이점
- DFS: 모든 노드 방문
- 백트래킹: 유망성 점검 후 유망하지 않은 노드는 방문하지 않음
- 시도 횟수 줄임.
### 예제
- N-Queens 문제
- 부분집합의 합이 n 이하인 모든 부분집합 구하기